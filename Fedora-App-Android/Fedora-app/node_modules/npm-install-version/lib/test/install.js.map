{"version":3,"sources":["../../src/test/install.js"],"names":["fs","require","test","niv","clean","install","packageJson","readFileSync","t","equal","JSON","parse","version","end","destination","packageJson1","packageJson2","overwrite"],"mappings":"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","file":"install.js","sourcesContent":["const fs = require('fs');\nconst test = require('tape');\n\nconst niv = require('../index.js');\nconst { clean } = require('./test-util.js');\n\ntest('niv.install normal', t => {\n  clean();\n  niv.install('csjs@1.0.0');\n  const packageJson = fs.readFileSync('node_modules/csjs@1.0.0/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.install remote', t => {\n  clean();\n  niv.install('scott113341/csjs#extract-extends-performance');\n  const packageJson = fs.readFileSync('node_modules/scott113341-csjs#extract-extends-performance/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.4');\n  t.end();\n});\n\ntest('niv.install scoped', t => {\n  clean();\n  niv.install('@scott113341/niv-scoped-test@1.0.0');\n  const packageJson = fs.readFileSync('node_modules/@scott113341-niv-scoped-test@1.0.0/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.install w/ dependencies', t => {\n  clean();\n  niv.install('push-dir@0.2.2');\n  const packageJson = fs.readFileSync('node_modules/push-dir@0.2.2/package.json');\n  t.equal(JSON.parse(packageJson).version, '0.2.2');\n  t.end();\n});\n\ntest('niv.install w/ destination', t => {\n  clean();\n  niv.install('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson = fs.readFileSync('node_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson).version, '1.0.0');\n  t.end();\n});\n\ntest('niv.install w/o overwrite', t => {\n  clean();\n  niv.install('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson1 = fs.readFileSync('node_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson1).version, '1.0.0');\n\n  niv.install('csjs@1.0.1', { destination: 'csjs@yolo' });\n  const packageJson2 = fs.readFileSync('node_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson2).version, '1.0.0');\n\n  t.end();\n});\n\ntest('niv.install w/ overwrite', t => {\n  clean();\n  niv.install('csjs@1.0.0', { destination: 'csjs@yolo' });\n  const packageJson1 = fs.readFileSync('node_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson1).version, '1.0.0');\n\n  niv.install('csjs@1.0.1', { destination: 'csjs@yolo', overwrite: true });\n  const packageJson2 = fs.readFileSync('node_modules/csjs@yolo/package.json');\n  t.equal(JSON.parse(packageJson2).version, '1.0.1');\n\n  t.end();\n});\n"]}